<p><a href="/addons/">Back to Add-ons list</a></p>
<form method="post" action="">
	<p><strong>File (without ext):</strong>&nbsp;<input name="addon" type="text" style="width: 100%; max-width: 30ch;" /></p>
	<p>Copy in the following textarea the full script file.</p>
	<p><textarea id="textareacontent" name="content" style="width: 100%; max-width: 140ch;" rows="20">${CONTENT}</textarea></p>
	<p><input type="submit" name="add" value="Install Add-on" /></p>
</form>
<p><span class="${REQUEST_RESULT}">${REQUEST_MSG}</span></p>
<script>(function(){
	function ready(fn){ if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',fn);} else {fn();}}
	function isDark(){ return document.body && document.body.classList.contains('dark'); }
	function themeName(){ return isDark() ? 'dracula' : 'default'; }
	function tryInit(){
		var ta=document.getElementById('textareacontent');
		if(!ta) return; if(window.CodeMirror && !ta._cm_inited){ try{ var cm=window.CodeMirror.fromTextArea(ta,{mode:'javascript',lineNumbers:true,theme:themeName(),tabSize:2,indentUnit:2,smartIndent:true,matchBrackets:true,autoCloseBrackets:true}); ta._cm_inited=true; var form=(ta.closest&&ta.closest('form'))||ta.form; if(form){ form.addEventListener('submit', function(){ if(cm&&cm.save) cm.save(); }); } }catch(e){} }
	}
	ready(function(){ var tries=0; (function poll(){ tryInit(); if(!(window.CodeMirror && document.getElementById('textareacontent') && document.getElementById('textareacontent')._cm_inited) && tries<30){ tries++; setTimeout(poll,100); } })(); });
})();</script>
