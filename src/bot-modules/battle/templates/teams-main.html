<script type="text/javascript">
	function removeTeam(team) {
		var elem = document.getElementById('confirm-' + team);
		if (elem) {
			elem.innerHTML = '<form style="display:inline;" method="post" action=""><input type="hidden" name="id" value="' + team + '" />Are you sure?&nbsp;<input type="submit" name="delteam" value="Delete Team" /></form>';
		}
		return false;
	}
</script>
<style>
	.teams-format-option {
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.teams-manager-section {
		display: flex;
		gap: 0.5rem;
		width: 100%;
	}

	.teams-formats-menu {
		display: flex;
		flex-direction: column;
		gap: 0.25rem;
		border-right: solid 1px var(--theme-main-div-border-color);
		width: 240px;
	}

	@media (max-width: 700px) {
		.teams-manager-section {
			flex-direction: column;
		}

		.teams-formats-menu {
			width: 100%;
			flex-direction: row;
			flex-wrap: wrap;
			border-right: none;
			border-bottom: solid 1px var(--theme-main-div-border-color);
		}
	}
</style>
<div style="padding-left: 8px;">
	<h2>Battle Teams ${SELECTED_FORMAT}</h2>
</div>
<div class="teams-manager-section">
	<div class="teams-formats-menu">
		<div style="display: flex; padding-left: 8px; padding-right: 8px;">
			<input id="teams-formats-filter" type="text" placeholder="Search formats..." style="flex: 1;"
				oninput="updateVisibleFormats()">
		</div>
		${MENU}
	</div>
	<div style="flex: 1;">
		${TEAMS}
		<form method="post" action="">
			<p><strong>Name</strong>:&nbsp;<input name="id" type="text" style="width: 100%; max-width: 40ch;" /></p>
			<p><strong>Format</strong>:&nbsp;${FORMATS}</p>
			<p><strong>Exportable</strong>:</p>
			<p><textarea name="exportable" style="width: 100%; max-width: 100ch;" rows="5">${EXPORTABLE}</textarea></p>
			<p><input type="submit" name="add" value="Add New Team" /></p>
		</form>
		<p><span class="${REQUEST_RESULT}">${REQUEST_MSG}</span></p>
	</div>
</div>
<script>
	function toId(text) {
		text = text || '';
		if (typeof text === 'number') text = '' + text;
		if (typeof text !== 'string') return toId(text && text.id);
		return text.toLowerCase().replace(/[^a-z0-9]+/g, '');
	}
	function updateVisibleFormats() {
		var formatSearch = toId(document.getElementById("teams-formats-filter").value);

		var formatMenuElements = document.querySelectorAll(".teams-format-option");

		for (var i = 0; i < formatMenuElements.length; i++) {
			var formatId = formatMenuElements[i].dataset.format + "";

			if (formatId.indexOf(formatSearch) >= 0) {
				formatMenuElements[i].style.display = "initial";
			} else {
				formatMenuElements[i].style.display = "none";
			}
		}
	}
	window.updateVisibleFormats = updateVisibleFormats;
</script>